<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>SuperChiDog</title>
<script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>
<style>
  body { margin: 0; background: #5c94fc; touch-action: none; }
  canvas { display: block; margin: auto; }
</style>
</head>
<body>

<script>
const config = {
  type: Phaser.AUTO,
  width: 900,
  height: 500,
  physics: {
    default: 'arcade',
    arcade: {
      gravity: { y: 1200 },
      debug: false
    }
  },
  scene: { preload, create, update }
};

new Phaser.Game(config);

let player, platforms, bones, bombs;
let score = 0;
let health = 10;
let scoreText, healthText;
let moveLeft=false, moveRight=false;
let jumpCount = 0, lastTap = 0;

function preload() {
  this.load.image('sky', 'https://labs.phaser.io/assets/skies/sky4.png');
  this.load.image('ground', 'https://labs.phaser.io/assets/sprites/platform.png');

  // ðŸ‘‰ PUT dog.png IN SAME FOLDER
  this.load.image('dog', 'dog.png');

  this.load.image('bone', 'https://labs.phaser.io/assets/sprites/star.png');
  this.load.image('bomb', 'https://labs.phaser.io/assets/sprites/bomb.png');
}

function create() {
  this.add.tileSprite(0,0,900,500,'sky').setOrigin(0).setScrollFactor(0);

  platforms = this.physics.add.staticGroup();
  for (let i=0;i<40;i++){
    platforms.create(i*300, 470, 'ground')
      .setScale(2).refreshBody();
  }

  player = this.physics.add.sprite(100, 300, 'dog');
  player.setScale(0.3);
  player.setBounce(0);
  player.body.setSize(player.width*0.6, player.height);

  this.physics.add.collider(player, platforms, ()=> jumpCount=0);

  bones = this.physics.add.group();
  bombs = this.physics.add.group();

  for (let i=1;i<30;i++){
    bones.create(i*350, Phaser.Math.Between(200,350), 'bone');
    if (i % 5 === 0) bombs.create(i*350, 420, 'bomb');
  }

  this.physics.add.collider(bones, platforms);
  this.physics.add.collider(bombs, platforms);

  this.physics.add.overlap(player, bones, collectBone, null, this);
  this.physics.add.overlap(player, bombs, hitBomb, null, this);

  this.cameras.main.startFollow(player);
  this.cameras.main.setBounds(0,0,12000,500);

  scoreText = this.add.text(16,16,'Score: 0',{fontSize:'20px',fill:'#fff'}).setScrollFactor(0);
  healthText = this.add.text(16,40,'Health: 10',{fontSize:'20px',fill:'#fff'}).setScrollFactor(0);

  this.input.on('pointerdown', p=>{
    const now = this.time.now;
    if (now-lastTap<300 && jumpCount<2){
      player.setVelocityY(-550);
      jumpCount++;
    } else if (jumpCount<1){
      player.setVelocityY(-550);
      jumpCount++;
    }
    lastTap=now;

    if (p.x < 450){ moveLeft=true; moveRight=false; }
    else { moveRight=true; moveLeft=false; }
  });

  this.input.on('pointerup', ()=>{
    moveLeft=false; moveRight=false;
  });
}

function collectBone(player,bone){
  bone.disableBody(true,true);
  score += Phaser.Math.Between(1,20);
  scoreText.setText('Score: '+score);
}

function hitBomb(player,bomb){
  bomb.disableBody(true,true);
  health--;
  healthText.setText('Health: '+health);
  if (health<=0){
    this.scene.restart();
    score=0; health=10;
  }
}

function update(){
  if (moveLeft){ player.setVelocityX(-250); player.flipX=true; }
  else if (moveRight){ player.setVelocityX(250); player.flipX=false; }
  else player.setVelocityX(0);
}
</script>

</body>
</html>
