
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>SuperChiDog</title>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js"></script>
<style>
body { margin:0; background:#5c94fc; overflow:hidden; }
</style>
</head>
<body>

<script>
const config = {
  type: Phaser.AUTO,
  width: 960,
  height: 540,
  physics: {
    default: 'arcade',
    arcade: {
      gravity: { y: 1400 },
      debug: false
    }
  },
  scene: { preload, create, update }
};

let player, cursors, ground;
let score = 0;
let scoreText, healthText;
let health = 10;
let jumps = 0;
let bones, bombs;
let clouds;

new Phaser.Game(config);

function preload() {
  this.load.image('sky', 'https://labs.phaser.io/assets/skies/sky4.png');
  this.load.image('ground', 'https://labs.phaser.io/assets/sprites/platform.png');

  // Replace this with YOUR DOG IMAGE URL later
  this.load.image('dog', 'https://i.imgur.com/JlUvsxa.png');

  this.load.image('bone', 'https://i.imgur.com/9yG6bqZ.png');
  this.load.image('bomb', 'https://labs.phaser.io/assets/sprites/bomb.png');
  this.load.image('cloud', 'https://labs.phaser.io/assets/skies/cloud.png');
}

function create() {
  this.add.tileSprite(0,0,5000,540,'sky').setOrigin(0);

  this.physics.world.setBounds(0,0,5000,540);

  // Clouds
  clouds = this.add.group();
  for (let i=0;i<20;i++){
    let c = clouds.create(
      Phaser.Math.Between(0,5000),
      Phaser.Math.Between(50,200),
      'cloud'
    );
    c.setAlpha(0.8);
  }

  // Ground
  ground = this.physics.add.staticGroup();
  for (let x=0;x<5000;x+=200){
    ground.create(x,520,'ground').setScale(2).refreshBody();
  }

  // Player
  player = this.physics.add.sprite(100,400,'dog');
  player.setScale(0.15);
  player.setCollideWorldBounds(true);

  this.physics.add.collider(player, ground, () => jumps = 0);

  // Camera
  this.cameras.main.startFollow(player);
  this.cameras.main.setBounds(0,0,5000,540);

  // Collectibles
  bones = this.physics.add.group({ allowGravity:false });
  bombs = this.physics.add.group({ allowGravity:false });

  for (let i=0;i<40;i++){
    bones.create(
      Phaser.Math.Between(400,4800),
      Phaser.Math.Between(200,400),
      'bone'
    ).setScale(0.1);

    bombs.create(
      Phaser.Math.Between(600,4800),
      Phaser.Math.Between(200,400),
      'bomb'
    ).setScale(0.5);
  }

  this.physics.add.overlap(player, bones, collectBone, null, this);
  this.physics.add.overlap(player, bombs, hitBomb, null, this);

  // UI
  scoreText = this.add.text(16,16,'Score: 0',{font:'20px Arial',fill:'#fff'}).setScrollFactor(0);
  healthText = this.add.text(16,40,'Health: ██████████',{font:'20px Arial',fill:'#ff0000'}).setScrollFactor(0);

  cursors = this.input.keyboard.createCursorKeys();

  // Touch = jump
  this.input.on('pointerdown', () => jump());
}

function update() {
  player.setVelocityX(0);

  if (cursors.left.isDown) player.setVelocityX(-300);
  if (cursors.right.isDown) player.setVelocityX(300);

  if (Phaser.Input.Keyboard.JustDown(cursors.up)) jump();

  // Spin while jumping
  if (!player.body.touching.down) player.rotation += 0.15;
  else player.rotation = 0;

  // Move clouds
  clouds.children.iterate(c=>{
    c.x -= 0.2;
    if (c.x < -200) c.x = 5000;
  });
}

function jump() {
  if (jumps < 2) {
    player.setVelocityY(-600);
    jumps++;
  }
}

function collectBone(player, bone) {
  bone.destroy();
  let pts = Phaser.Math.Between(1,20);
  score += pts;
  scoreText.setText('Score: ' + score);
}

function hitBomb(player, bomb) {
  bomb.destroy();
  health--;
  healthText.setText('Health: ' + '█'.repeat(health));
  if (health <= 0) {
    this.scene.pause();
    alert('Game Over');
  }
}
</script>

</body>
</html>
