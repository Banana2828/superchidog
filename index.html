
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Super Chidog</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: #87ceeb;
}
canvas {
  display: block;
}

/* Controls */
.controls {
  position: fixed;
  bottom: 20px;
  width: 100%;
  display: flex;
  justify-content: space-between;
  padding: 0 20px;
}
.left-controls {
  display: flex;
  gap: 20px;
}
.btn {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  background: rgba(0,0,0,0.4);
  color: white;
  font-size: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
}
</style>
</head>

<body>

<canvas id="game"></canvas>

<div class="controls">
  <div class="left-controls">
    <div class="btn" id="left">⬅️</div>
    <div class="btn" id="right">➡️</div>
  </div>
  <div class="btn" id="jump">⬆️</div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resize();
addEventListener("resize", resize);

// Load dog
const dog = new Image();
dog.src = "dog.png";

// Player
const player = {
  x: 100,
  y: 0,
  w: 60,
  h: 60,
  vx: 0,
  vy: 0,
  speed: 5,
  jumpCount: 0,
  onGround: false,
  health: 10
};

let score = 0;
const gravity = 0.8;
const groundY = () => canvas.height - 120;

// Obstacles & bones
const obstacles = [];
const bones = [];

function spawnObstacle() {
  obstacles.push({
    x: canvas.width + Math.random() * 800,
    y: groundY() - 40,
    w: 40,
    h: 40
  });
}

function spawnBone() {
  bones.push({
    x: canvas.width + Math.random() * 800,
    y: groundY() - 100 - Math.random() * 100,
    r: 15,
    value: Math.floor(Math.random() * 20) + 1
  });
}

for (let i = 0; i < 5; i++) {
  spawnObstacle();
  spawnBone();
}

// Controls
let moveLeft = false;
let moveRight = false;

left.ontouchstart = () => moveLeft = true;
left.ontouchend = () => moveLeft = false;

right.ontouchstart = () => moveRight = true;
right.ontouchend = () => moveRight = false;

let lastJump = 0;
jump.ontouchstart = () => {
  const now = Date.now();
  if (player.onGround || player.jumpCount < 2) {
    player.vy = -15;
    player.jumpCount++;
    player.onGround = false;
  }
  lastJump = now;
};

// Collision
function hit(a, b) {
  return a.x < b.x + b.w &&
         a.x + a.w > b.x &&
         a.y < b.y + b.h &&
         a.y + a.h > b.y;
}

// Game loop
function loop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Sky
  ctx.fillStyle = "#87ceeb";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Clouds
  ctx.fillStyle = "white";
  for (let i = 0; i < 4; i++) {
    ctx.beginPath();
    ctx.arc(200 + i*300, 100, 40, 0, Math.PI*2);
    ctx.fill();
  }

  // Ground
  ctx.fillStyle = "#4caf50";
  ctx.fillRect(0, groundY(), canvas.width, 120);

  // Movement
  if (moveLeft) player.vx = -player.speed;
  else if (moveRight) player.vx = player.speed;
  else player.vx = 0;

  player.vy += gravity;
  player.x += player.vx;
  player.y += player.vy;

  if (player.y + player.h >= groundY()) {
    player.y = groundY() - player.h;
    player.vy = 0;
    player.onGround = true;
    player.jumpCount = 0;
  }

  // Draw dog
  ctx.drawImage(dog, player.x, player.y, player.w, player.h);

  // Obstacles
  obstacles.forEach(o => {
    o.x -= 3;
    ctx.fillStyle = "red";
    ctx.fillRect(o.x, o.y, o.w, o.h);
    if (hit(player, o)) {
      player.health--;
      o.x = -999;
    }
  });

  // Bones
  bones.forEach(b => {
    b.x -= 3;
    ctx.fillStyle = "white";
    ctx.beginPath();
    ctx.arc(b.x, b.y, b.r, 0, Math.PI*2);
    ctx.fill();
    if (player.x < b.x + b.r &&
        player.x + player.w > b.x - b.r &&
        player.y < b.y + b.r &&
        player.y + player.h > b.y - b.r) {
      score += b.value;
      b.x = -999;
    }
  });

  // UI
  ctx.fillStyle = "#000";
  ctx.font = "20px Arial";
  ctx.fillText("Score: " + score, 20, 30);

  ctx.fillText("Health:", 20, 60);
  for (let i = 0; i < 10; i++) {
    ctx.strokeRect(90 + i*22, 45, 20, 20);
    if (i < player.health) {
      ctx.fillStyle = "green";
      ctx.fillRect(90 + i*22, 45, 20, 20);
    }
  }

  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
