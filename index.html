function update() {
  player.vy += gravity;
  player.y += player.vy;
  player.onGround = false;

  // GROUND
  const groundY = canvas.height - groundHeight - player.h;
  if (player.y >= groundY) {
    player.y = groundY;
    player.vy = 0;
    player.onGround = true;
  }

  // MOVE WORLD LEFT (RUNNING)
  platforms.forEach(p => {
    p.x -= moveSpeed;

    // PLATFORM COLLISION
    if (
      player.x + player.w > p.x &&
      player.x < p.x + p.w &&
      player.y + player.h >= p.y &&
      player.y + player.h <= p.y + p.h &&
      player.vy >= 0
    ) {
      player.y = p.y - player.h;
      player.vy = 0;
      player.onGround = true;
    }

    // RECYCLE PLATFORMS (ENDLESS)
    if (p.x + p.w < 0) {
      p.x = canvas.width + Math.random() * 300;
      p.y = 300 + Math.random() * 200;
    }
  });
}
