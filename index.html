<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SuperChidog</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #5c94fc; /* Mario-sky vibe */
    touch-action: none;
  }

  canvas {
    display: block;
    margin: 0 auto;
    background: linear-gradient(#5c94fc, #9be2ff);
  }
</style>
</head>

<body>

<canvas id="game" width="360" height="640"></canvas>

<script>
/* ======================
   BASIC SETUP
====================== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

/* ======================
   LOAD DOG IMAGE
   üëâ Replace URL with your dog photo later
====================== */
const dogImg = new Image();
dogImg.src = "https://i.imgur.com/4AiXzf8.png"; // placeholder dog

/* ======================
   PLAYER
====================== */
let dog = {
  x: 80,
  y: 400,
  w: 50,
  h: 50,
  vy: 0,
  rotation: 0,
  health: 10,
  score: 0
};

const gravity = 0.5;
const jumpPower = -9;

/* ======================
   OBJECTS
====================== */
let bones = [];
let bombs = [];
let hearts = [];

/* ======================
   INPUT (touch anywhere)
====================== */
canvas.addEventListener("mousedown", jump);
canvas.addEventListener("touchstart", jump);

function jump() {
  dog.vy = jumpPower;
}

/* ======================
   SPAWNERS
====================== */
function spawnBone() {
  bones.push({
    x: canvas.width,
    y: Math.random() * 400 + 120,
    r: 10,
    value: Math.floor(Math.random() * 20) + 1
  });
}

function spawnBomb() {
  bombs.push({
    x: canvas.width,
    y: Math.random() * 400 + 120,
    r: 12
  });
}

function spawnHeart() {
  hearts.push({
    x: canvas.width,
    y: Math.random() * 400 + 120,
    r: 10
  });
}

setInterval(spawnBone, 1600);
setInterval(spawnBomb, 2800);
setInterval(() => {
  if (Math.random() < 0.3) spawnHeart(); // rare
}, 5000);

/* ======================
   GAME LOOP
====================== */
function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  /* ----- physics ----- */
  dog.vy += gravity;
  dog.y += dog.vy;

  if (dog.y + dog.h > canvas.height - 40) {
    dog.y = canvas.height - 40 - dog.h;
    dog.vy = 0;
    dog.rotation = 0;
  }

  if (dog.vy < 0) dog.rotation += 0.15;

  /* ----- draw ground ----- */
  ctx.fillStyle = "#4caf50";
  ctx.fillRect(0, canvas.height - 40, canvas.width, 40);

  /* ----- draw dog ----- */
  ctx.save();
  ctx.translate(dog.x + dog.w/2, dog.y + dog.h/2);
  ctx.rotate(dog.rotation);
  ctx.drawImage(dogImg, -dog.w/2, -dog.h/2, dog.w, dog.h);
  ctx.restore();

  /* ----- bones ----- */
  bones.forEach((b, i) => {
    b.x -= 3;
    ctx.fillStyle = "#fff";
    ctx.beginPath();
    ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
    ctx.fill();

    if (hit(b)) {
      dog.score += b.value;
      bones.splice(i, 1);
    }
  });

  /* ----- bombs ----- */
  bombs.forEach((b, i) => {
    b.x -= 4;
    ctx.fillStyle = "black";
    ctx.beginPath();
    ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
    ctx.fill();

    if (hit(b)) {
      dog.health--;
      bombs.splice(i, 1);
    }
  });

  /* ----- hearts ----- */
  hearts.forEach((h, i) => {
    h.x -= 2;
    ctx.fillStyle = "red";
    ctx.beginPath();
    ctx.arc(h.x, h.y, h.r, 0, Math.PI * 2);
    ctx.fill();

    if (hit(h)) {
      dog.health = Math.min(10, dog.health + 1);
      hearts.splice(i, 1);
    }
  });

  /* ----- UI ----- */
  ctx.fillStyle = "#000";
  ctx.font = "16px Arial";
  ctx.fillText("üê∂ SuperChidog", 10, 20);
  ctx.fillText("ü¶¥ Score: " + dog.score, 10, 40);
  ctx.fillText("‚ù§Ô∏è Health: " + dog.health, 10, 60);

  if (dog.health <= 0) {
    ctx.fillStyle = "rgba(0,0,0,0.7)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#fff";
    ctx.font = "30px Arial";
    ctx.fillText("GAME OVER", 90, 320);
    return;
  }

  requestAnimationFrame(update);
}

/* ======================
   COLLISION
====================== */
function hit(obj) {
  return (
    dog.x < obj.x + obj.r &&
    dog.x + dog.w > obj.x - obj.r &&
    dog.y < obj.y + obj.r &&
    dog.y + dog.h > obj.y - obj.r
  );
}

update();
</script>

</body>
</html>
